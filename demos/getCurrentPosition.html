<!DOCTYPE html>
<html lang="zh">

	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<title>navigator.geolocation.getCurrentPosition</title>
		<!--<script type="text/javascript" language="javascript" src="//api.map.baidu.com/geocoder?output=json&location=22.6362897,114.064065&ak=uUOfDhx05NfiR8nxc9iFs6s1XwL3gHwU"></script>-->
		
	</head>
	<style>

	</style>

	<body>

	</body>
	<script>
		function renderReverse (res) {
			alert(JSON.stringify(res,null,' '))
		}
		navigator.geolocation.getCurrentPosition(function(pos) {
			 var crd = pos.coords;
			 alert('Latitude: ' + crd.latitude);
			 alert('Longitude: ' + crd.longitude);
			 alert('More or less ' + crd.accuracy + ' meters.');
			 createScript(crd.latitude,crd.longitude)
		}, function(err) {
			alert('error')
			console.log(err)
			
			createScript('22.6362897','114.064065')
		})
		
		function createScript(latitude,longitude){
			var script = document.createElement('script')
			script.src = '//api.map.baidu.com/geocoder/v2/?callback=renderReverse&output=json&ak=uUOfDhx05NfiR8nxc9iFs6s1XwL3gHwU&location=' + latitude + ','+ longitude
			document.body.appendChild(script)
		}
	</script>
	<!--<script type="text/javascript" language="javascript" src="//api.map.baidu.com/geocoder/v2/?callback=renderReverse&location=22.6362897,114.064065&output=json&ak=uUOfDhx05NfiR8nxc9iFs6s1XwL3gHwU"></script>-->
		
</html>
